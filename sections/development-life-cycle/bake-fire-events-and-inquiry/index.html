



<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      <meta http-equiv="x-ua-compatible" content="ie=edge">
      
      
      
      
        <meta name="lang:clipboard.copy" content="Copy to clipboard">
      
        <meta name="lang:clipboard.copied" content="Copied to clipboard">
      
        <meta name="lang:search.language" content="en">
      
        <meta name="lang:search.pipeline.stopwords" content="True">
      
        <meta name="lang:search.pipeline.trimmer" content="True">
      
        <meta name="lang:search.result.none" content="No matching documents">
      
        <meta name="lang:search.result.one" content="1 matching document">
      
        <meta name="lang:search.result.other" content="# matching documents">
      
        <meta name="lang:search.tokenizer" content="[\s\-]+">
      
      <link rel="shortcut icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.0.4, mkdocs-material-4.4.0">
    
    
      
        <title>Bake, Fire Events and Inquiry - Baker</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/application.0284f74d.css">
      
      
    
    
      <script src="../../../assets/javascripts/modernizr.74668098.js"></script>
    
    
      
        <link href="https://fonts.gstatic.com" rel="preconnect" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,400,400i,700|Roboto+Mono&display=fallback">
        <style>body,input{font-family:"Roboto","Helvetica Neue",Helvetica,Arial,sans-serif}code,kbd,pre{font-family:"Roboto Mono","Courier New",Courier,monospace}</style>
      
    
    <link rel="stylesheet" href="../../../assets/fonts/material-icons.css">
    
    
      <link rel="stylesheet" href="../../../css/ing.css">
    
    
      
    
    
  </head>
  
    <body dir="ltr">
  
    <svg class="md-svg">
      <defs>
        
        
          <svg xmlns="http://www.w3.org/2000/svg" width="416" height="448" viewBox="0 0 416 448" id="__github"><path fill="currentColor" d="M160 304q0 10-3.125 20.5t-10.75 19T128 352t-18.125-8.5-10.75-19T96 304t3.125-20.5 10.75-19T128 256t18.125 8.5 10.75 19T160 304zm160 0q0 10-3.125 20.5t-10.75 19T288 352t-18.125-8.5-10.75-19T256 304t3.125-20.5 10.75-19T288 256t18.125 8.5 10.75 19T320 304zm40 0q0-30-17.25-51T296 232q-10.25 0-48.75 5.25Q229.5 240 208 240t-39.25-2.75Q130.75 232 120 232q-29.5 0-46.75 21T56 304q0 22 8 38.375t20.25 25.75 30.5 15 35 7.375 37.25 1.75h42q20.5 0 37.25-1.75t35-7.375 30.5-15 20.25-25.75T360 304zm56-44q0 51.75-15.25 82.75-9.5 19.25-26.375 33.25t-35.25 21.5-42.5 11.875-42.875 5.5T212 416q-19.5 0-35.5-.75t-36.875-3.125-38.125-7.5-34.25-12.875T37 371.5t-21.5-28.75Q0 312 0 260q0-59.25 34-99-6.75-20.5-6.75-42.5 0-29 12.75-54.5 27 0 47.5 9.875t47.25 30.875Q171.5 96 212 96q37 0 70 8 26.25-20.5 46.75-30.25T376 64q12.75 25.5 12.75 54.5 0 21.75-6.75 42 34 40 34 99.5z"/></svg>
        
      </defs>
    </svg>
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" data-md-component="overlay" for="__drawer"></label>
    
      <a href="#bake-fire-events-and-inquiry" tabindex="1" class="md-skip">
        Skip to content
      </a>
    
    
      <header class="md-header" data-md-component="header">
  <nav class="md-header-nav md-grid">
    <div class="md-flex">
      <div class="md-flex__cell md-flex__cell--shrink">
        <a href="../../.." title="Baker" class="md-header-nav__button md-logo">
          
            <i class="md-icon"></i>
          
        </a>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        <label class="md-icon md-icon--menu md-header-nav__button" for="__drawer"></label>
      </div>
      <div class="md-flex__cell md-flex__cell--stretch">
        <div class="md-flex__ellipsis md-header-nav__title" data-md-component="title">
          
            <span class="md-header-nav__topic">
              Baker
            </span>
            <span class="md-header-nav__topic">
              
                Bake, Fire Events and Inquiry
              
            </span>
          
        </div>
      </div>
      <div class="md-flex__cell md-flex__cell--shrink">
        
          <label class="md-icon md-icon--search md-header-nav__button" for="__search"></label>
          
<div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="query" data-md-state="active">
      <label class="md-icon md-search__icon" for="__search"></label>
      <button type="reset" class="md-icon md-search__icon" data-md-component="reset" tabindex="-1">
        &#xE5CD;
      </button>
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="result">
          <div class="md-search-result__meta">
            Type to start searching
          </div>
          <ol class="md-search-result__list"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
        
      </div>
      
        <div class="md-flex__cell md-flex__cell--shrink">
          <div class="md-header-nav__source">
            


  

<a href="https://github.com/ing-bank/baker/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ing-bank/baker
  </div>
</a>
          </div>
        </div>
      
    </div>
  </nav>
</header>
    
    <div class="md-container">
      
        
      
      
      <main class="md-main">
        <div class="md-main__inner md-grid" data-md-component="container">
          
            
              <div class="md-sidebar md-sidebar--primary" data-md-component="navigation">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    <nav class="md-nav md-nav--primary" data-md-level="0">
  <label class="md-nav__title md-nav__title--site" for="__drawer">
    <a href="../../.." title="Baker" class="md-nav__button md-logo">
      
        <i class="md-icon"></i>
      
    </a>
    Baker
  </label>
  
    <div class="md-nav__source">
      


  

<a href="https://github.com/ing-bank/baker/" title="Go to repository" class="md-source" data-md-source="github">
  
    <div class="md-source__icon">
      <svg viewBox="0 0 24 24" width="24" height="24">
        <use xlink:href="#__github" width="24" height="24"></use>
      </svg>
    </div>
  
  <div class="md-source__repository">
    ing-bank/baker
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      


  <li class="md-nav__item">
    <a href="../../.." title="Home" class="md-nav__link">
      Home
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../getting-started/" title="Getting Started" class="md-nav__link">
      Getting Started
    </a>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../concepts/" title="Concepts" class="md-nav__link">
      Concepts
    </a>
  </li>

    
      
      
      

  


  <li class="md-nav__item md-nav__item--active md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-4" type="checkbox" id="nav-4" checked>
    
    <label class="md-nav__link" for="nav-4">
      Development Life Cycle
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-4">
        Development Life Cycle
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../design-a-recipe/" title="Design a Recipe" class="md-nav__link">
      Design a Recipe
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../use-visualizations/" title="Use Visualizations" class="md-nav__link">
      Use Visualizations
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../implement-interactions/" title="Implement Interactions" class="md-nav__link">
      Implement Interactions
    </a>
  </li>

        
          
          
          

  


  <li class="md-nav__item md-nav__item--active">
    
    <input class="md-toggle md-nav__toggle" data-md-toggle="toc" type="checkbox" id="__toc">
    
      
    
    
      <label class="md-nav__link md-nav__link--active" for="__toc">
        Bake, Fire Events and Inquiry
      </label>
    
    <a href="./" title="Bake, Fire Events and Inquiry" class="md-nav__link md-nav__link--active">
      Bake, Fire Events and Inquiry
    </a>
    
      
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bake" title="Bake" class="md-nav__link">
    Bake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fire-events" title="Fire Events" class="md-nav__link">
    Fire Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inquiry" title="Inquiry" class="md-nav__link">
    Inquiry
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recipe-instance-state" title="Recipe Instance State" class="md-nav__link">
    Recipe Instance State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipe-instance-state-visualizations" title="Recipe Instance State Visualizations" class="md-nav__link">
    Recipe Instance State Visualizations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
    
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../test/" title="Test" class="md-nav__link">
      Test
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../configure/" title="Configure" class="md-nav__link">
      Configure
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../monitor/" title="Monitor" class="md-nav__link">
      Monitor
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../resolve-failed-recipe-instances/" title="Resolve Failed Recipes" class="md-nav__link">
      Resolve Failed Recipes
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-5" type="checkbox" id="nav-5">
    
    <label class="md-nav__link" for="nav-5">
      Reference
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-5">
        Reference
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/main-abstractions/" title="Main Abstractions" class="md-nav__link">
      Main Abstractions
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/execution-semantics/" title="Execution Semantics" class="md-nav__link">
      Execution Semantics
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/baker-types-and-values/" title="Baker Types and Values" class="md-nav__link">
      Baker Types and Values
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/dsls/" title="Recipe DSLs" class="md-nav__link">
      Recipe DSLs
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/runtime/" title="The Akka Based Runtime" class="md-nav__link">
      The Akka Based Runtime
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/visualization/" title="Visualization" class="md-nav__link">
      Visualization
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/event-listener/" title="Event Listener" class="md-nav__link">
      Event Listener
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../reference/stores/" title="Event Stores and Cluster Configuration" class="md-nav__link">
      Event Stores and Cluster Configuration
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item md-nav__item--nested">
    
      <input class="md-toggle md-nav__toggle" data-md-toggle="nav-6" type="checkbox" id="nav-6">
    
    <label class="md-nav__link" for="nav-6">
      Versions
    </label>
    <nav class="md-nav" data-md-component="collapsible" data-md-level="1">
      <label class="md-nav__title" for="nav-6">
        Versions
      </label>
      <ul class="md-nav__list" data-md-scrollfix>
        
        
          
          
          


  <li class="md-nav__item">
    <a href="../../versions/baker-3/" title="Migration Guide v3" class="md-nav__link">
      Migration Guide v3
    </a>
  </li>

        
          
          
          


  <li class="md-nav__item">
    <a href="../../versions/baker-2/" title="Migration Guide v2" class="md-nav__link">
      Migration Guide v2
    </a>
  </li>

        
      </ul>
    </nav>
  </li>

    
      
      
      


  <li class="md-nav__item">
    <a href="../../feature-comparison/" title="Feature comparison" class="md-nav__link">
      Feature comparison
    </a>
  </li>

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              <div class="md-sidebar md-sidebar--secondary" data-md-component="toc">
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    
<nav class="md-nav md-nav--secondary">
  
  
    
  
  
    <label class="md-nav__title" for="__toc">Table of contents</label>
    <ul class="md-nav__list" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#bake" title="Bake" class="md-nav__link">
    Bake
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#fire-events" title="Fire Events" class="md-nav__link">
    Fire Events
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#inquiry" title="Inquiry" class="md-nav__link">
    Inquiry
  </a>
  
    <nav class="md-nav">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#recipe-instance-state" title="Recipe Instance State" class="md-nav__link">
    Recipe Instance State
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipe-instance-state-visualizations" title="Recipe Instance State Visualizations" class="md-nav__link">
    Recipe Instance State Visualizations
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
      
      
      
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          <div class="md-content">
            <article class="md-content__inner md-typeset">
              
                
                  <a href="https://github.com/ing-bank/baker/edit/master/docs/sections/development-life-cycle/bake-fire-events-and-inquiry.md" title="Edit this page" class="md-icon md-content__icon">&#xE3C9;</a>
                
                
                <h1 id="bake-fire-events-and-inquiry">Bake, Fire Events and Inquiry</h1>
<p>At this moment we already have a <code>Recipe</code> and <code>InteractionInstances</code>, the next step is to create a Baker runtime, and add 
to it the <code>ImplementationInstances</code> and the <code>Recipe</code> (in that order, since adding a <code>Recipe</code> validates that there exist 
valid <code>InteractionInstances</code> for each <code>Interaction</code>).</p>
<p>For this example we are going to create an Akka-based, non-cluster, local runtime. This runtime is based on a library called
<a href="https://akka.io/">Akka</a> which helps us manage concurrency and gives us distributed-systems semantics for the cluster mode, 
this is almost completely hidden from you, but currently for some configuration and managing a Baker cluster, it might be 
useful to check the Akka documentation.</p>
<p>Also note that to add a <code>Recipe</code> you need to first transform it into a <code>CompiledRecipe</code> by using the provided 
<code>RecipeCompiler.compileRecipe(recipe)</code> API.</p>
<p><em>Note: Since Baker 3.0 all APIs of the runtime are asynchronous by default. That means all APIs return <code>Future[A]</code> for 
Scala (IO interface will come in the future depending on demand) and <code>CompletableFuture&lt;A&gt;</code> for Java. If you are not familiar 
with these constructs we highly recommend checking one of the many tutorials and documentation pages in the internet, 
otherwise for now you can do <code>.join</code> on any <code>CompletableFuture</code> or <code>Await.result(yourFuture, 1.second)</code> on any <code>Future</code>
to block and do normal synchronous/blocking programming.</em></p>
<div class="superfences-tabs">
<input name="__tabs_1" type="radio" id="__tab_1_0" checked="checked" />
<label for="__tab_1_0">Scala</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="nn">akka.actor.ActorSystem</span>
<span class="k">import</span> <span class="nn">akka.stream.</span><span class="o">{</span><span class="nc">ActorMaterializer</span><span class="o">,</span> <span class="nc">Materializer</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span>
<span class="k">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span>
<span class="k">import</span> <span class="nn">com.ing.baker.runtime.scaladsl.</span><span class="o">{</span><span class="nc">Baker</span><span class="o">,</span> <span class="nc">EventInstance</span><span class="o">}</span>

<span class="k">import</span> <span class="nn">scala.concurrent.</span><span class="o">{</span><span class="nc">Await</span><span class="o">,</span> <span class="nc">Future</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">scala.concurrent.duration._</span>
<span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext.Implicits.global</span>


<span class="k">implicit</span> <span class="k">val</span> <span class="n">actorSystem</span><span class="k">:</span> <span class="kt">ActorSystem</span> <span class="o">=</span>
  <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">)</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">materializer</span><span class="k">:</span> <span class="kt">Materializer</span> <span class="o">=</span>
  <span class="nc">ActorMaterializer</span><span class="o">()</span>
<span class="k">val</span> <span class="n">baker</span><span class="k">:</span> <span class="kt">Baker</span> <span class="o">=</span> <span class="nc">Baker</span><span class="o">.</span><span class="n">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">)</span>

<span class="k">val</span> <span class="n">compiledRecipe</span><span class="k">:</span> <span class="kt">CompiledRecipe</span> <span class="o">=</span> <span class="nc">RecipeCompiler</span><span class="o">.</span><span class="n">compileRecipe</span><span class="o">(</span><span class="nc">WebshopRecipe</span><span class="o">.</span><span class="n">recipe</span><span class="o">)</span>

<span class="k">val</span> <span class="n">program</span><span class="k">:</span> <span class="kt">Future</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addImplementation</span><span class="o">(</span><span class="nc">WebshopInstancesReflection</span><span class="o">.</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
  <span class="n">recipeId</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span> <span class="o">()</span>
</pre></div></div>
<input name="__tabs_1" type="radio" id="__tab_1_1" />
<label for="__tab_1_1">Java</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">akka.actor.ActorSystem</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.ActorMaterializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.Materializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.Baker</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.InteractionInstance</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.CompletableFuture</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JMain</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">ActorSystem</span> <span class="n">actorSystem</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">);</span>
        <span class="n">Materializer</span> <span class="n">materializer</span> <span class="o">=</span> <span class="n">ActorMaterializer</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">);</span>
        <span class="n">Baker</span> <span class="n">baker</span> <span class="o">=</span> <span class="n">Baker</span><span class="o">.</span><span class="na">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">);</span>

        <span class="n">InteractionInstance</span> <span class="n">reserveItemsInstance</span> <span class="o">=</span> <span class="n">InteractionInstance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="k">new</span> <span class="n">ReserveItems</span><span class="o">());</span>
        <span class="n">CompiledRecipe</span> <span class="n">compiledRecipe</span> <span class="o">=</span> <span class="n">RecipeCompiler</span><span class="o">.</span><span class="na">compileRecipe</span><span class="o">(</span><span class="n">JWebshopRecipe</span><span class="o">.</span><span class="na">recipe</span><span class="o">);</span>

        <span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">asyncRecipeId</span> <span class="o">=</span> <span class="n">baker</span><span class="o">.</span><span class="na">addImplementation</span><span class="o">(</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">ignore</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">));</span>

        <span class="c1">// Blocks, not recommended but useful for testing or trying things out</span>
        <span class="n">String</span> <span class="n">recipeId</span> <span class="o">=</span> <span class="n">asyncRecipeId</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></div>
</div>
<h2 id="bake">Bake</h2>
<p>Next, you can start one instance of your process by <code>baking</code> a recipe, this will internally create a <code>RecipeInstance</code>
which will hold the state of your process, listen to <code>EventInstances</code>, execute your <code>InteractionInstances</code> when 
<code>IngredientInstances</code> are available and handle any failure state. </p>
<p><code>RecipeInstances</code> can be created by choosing a <code>CompiledRecipe</code> by using the <code>recipeId</code> yielded by the 
<code>Baker.addRecipe(compiledRecipe)</code> API, and by providing a <code>recipeInstanceId</code> of your choosing; you will use this last id
to reference and interact with the created <code>RecipeInstance</code>. Use the <code>Baker.bake(recipeId, recipeInstanceId)</code> API for 
creating a <code>RecipeInstance</code>.</p>
<p><em>Note: In an Akka-cluster-based Baker, these <code>RecipeInstances</code> are also automatically distributed over nodes, and the 
cluster will ensure that there is 1 <code>RecipeInstance</code> running on 1 node, and if the node dies, it will detect it and 
restore the <code>RecipeInstance</code> in another available node, for this you need to configure an underlying distributed store;
for more on this please refer to the <a href="../../development-life-cycle/configure/">configuration section</a> and the <a href="../../reference/runtime/">runtime section</a>.</em></p>
<div class="superfences-tabs">
<input name="__tabs_2" type="radio" id="__tab_2_0" checked="checked" />
<label for="__tab_2_0">Scala</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="nn">akka.actor.ActorSystem</span>
<span class="k">import</span> <span class="nn">akka.stream.</span><span class="o">{</span><span class="nc">ActorMaterializer</span><span class="o">,</span> <span class="nc">Materializer</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span>
<span class="k">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span>
<span class="k">import</span> <span class="nn">com.ing.baker.runtime.scaladsl.</span><span class="o">{</span><span class="nc">Baker</span><span class="o">,</span> <span class="nc">EventInstance</span><span class="o">}</span>

<span class="k">import</span> <span class="nn">scala.concurrent.</span><span class="o">{</span><span class="nc">Await</span><span class="o">,</span> <span class="nc">Future</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">scala.concurrent.duration._</span>
<span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext.Implicits.global</span>


<span class="k">implicit</span> <span class="k">val</span> <span class="n">actorSystem</span><span class="k">:</span> <span class="kt">ActorSystem</span> <span class="o">=</span>
  <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">)</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">materializer</span><span class="k">:</span> <span class="kt">Materializer</span> <span class="o">=</span>
  <span class="nc">ActorMaterializer</span><span class="o">()</span>
<span class="k">val</span> <span class="n">baker</span><span class="k">:</span> <span class="kt">Baker</span> <span class="o">=</span> <span class="nc">Baker</span><span class="o">.</span><span class="n">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">)</span>

<span class="k">val</span> <span class="n">compiledRecipe</span><span class="k">:</span> <span class="kt">CompiledRecipe</span> <span class="o">=</span> <span class="nc">RecipeCompiler</span><span class="o">.</span><span class="n">compileRecipe</span><span class="o">(</span><span class="nc">WebshopRecipe</span><span class="o">.</span><span class="n">recipe</span><span class="o">)</span>

<span class="k">val</span> <span class="n">program</span><span class="k">:</span> <span class="kt">Future</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addImplementation</span><span class="o">(</span><span class="nc">WebshopInstancesReflection</span><span class="o">.</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
  <span class="n">recipeId</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">bake</span><span class="o">(</span><span class="n">recipeId</span><span class="o">,</span> <span class="s">&quot;first-instance-id&quot;</span><span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span> <span class="o">()</span>
</pre></div></div>
<input name="__tabs_2" type="radio" id="__tab_2_1" />
<label for="__tab_2_1">Java</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">akka.actor.ActorSystem</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.ActorMaterializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.Materializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.Baker</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.InteractionInstance</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.concurrent.CompletableFuture</span><span class="o">;</span>

<span class="c1">// As a small quirk ok the Java API, all operations which are ment to not return something, will return a </span>
<span class="c1">// scala.runtime.BoxedUnit object. You should think of it like Java&#39;s Void or void and you can safely</span>
<span class="c1">// ignore it except for your type signatures.</span>
<span class="kn">import</span> <span class="nn">scala.runtime.BoxedUnit</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JMain</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">ActorSystem</span> <span class="n">actorSystem</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">);</span>
        <span class="n">Materializer</span> <span class="n">materializer</span> <span class="o">=</span> <span class="n">ActorMaterializer</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">);</span>
        <span class="n">Baker</span> <span class="n">baker</span> <span class="o">=</span> <span class="n">Baker</span><span class="o">.</span><span class="na">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">);</span>

        <span class="n">InteractionInstance</span> <span class="n">reserveItemsInstance</span> <span class="o">=</span> <span class="n">InteractionInstance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="k">new</span> <span class="n">ReserveItems</span><span class="o">());</span>
        <span class="n">CompiledRecipe</span> <span class="n">compiledRecipe</span> <span class="o">=</span> <span class="n">RecipeCompiler</span><span class="o">.</span><span class="na">compileRecipe</span><span class="o">(</span><span class="n">JWebshopRecipe</span><span class="o">.</span><span class="na">recipe</span><span class="o">);</span>

        <span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">BoxedUnit</span><span class="o">&gt;</span> <span class="n">asyncRecipeId</span> <span class="o">=</span> <span class="n">baker</span><span class="o">.</span><span class="na">addImplementation</span><span class="o">(</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">ignore</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">))</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">recipeId</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">bake</span><span class="o">(</span><span class="n">recipeId</span><span class="o">,</span> <span class="n">recipeInstanceId</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></div>
</div>
<h2 id="fire-events">Fire Events</h2>
<p>Next, we want our process to start flowing through it's state, and start executing <code>InteractionInstances</code>, for that we
need to fire the nicknamed <code>SensoryEvents</code> which are just <code>EventInstances</code> which match the root <code>Events</code> from our <code>Recipe</code>.</p>
<p>There are several supported semantics for firing an event. When you fire an event you might want to be notified and continue your 
asynchronous computation on 1 of 4 different moments:</p>
<ol>
<li>
<p>When the event got accepted by the <code>RecipeInstance</code> but has not started cascading the execution of <code>InteractionInstances</code>. 
For this use the <code>Baker.fireEventAndResolveWhenReceived(recipeInstanceId, eventInstance)</code> API. This will return a 
<code>Future[SensoryEventStatus]</code> enum notifying of the outcome (the event might get rejected).</p>
</li>
<li>
<p>When the event got accepted by the <code>RecipeInstance</code> and has finished cascading the execution of <code>InteractionInstances</code>
up to the point that it requires more <code>EventInstances</code> (<code>SensoryEvents</code>) to continue, or the process has finished.
For this use the <code>Baker.fireEventAndResolveWhenCompleted(recipeInstanceId, eventInstance)</code> API. This will return a 
<code>Future[EventResult]</code> object containing a <code>SensoryEventStatus</code>, the <code>Event</code> names that got fired in consequence of this 
<code>SensoryEvent</code>, and the current available <code>Ingredients</code> output of the <code>InteractionInstances</code> that got executed as consequence 
of the <code>SensoryEvent</code>.</p>
</li>
<li>
<p>You want to do something on both of the previously mentioned moments, then use the 
<code>Baker.fireEvent(recipeInstanceId, eventInstance)</code> API, which will return an <code>EventResolutions</code> object which contains both
<code>Future[SensoryEventStatus]</code> and <code>Future[EventResult]</code> (or its <code>CompletableFuture&lt;A&gt;</code> equivalents in Java).</p>
</li>
<li>
<p>As soon as an intermediate <code>Event</code> fires from one of the <code>InteractionInstances</code> that execute as consequence of the fired
<code>SensoryEvent</code>. For this use the <code>Baker.fireEventAndResolveOnEvent(recipeInstanceId, eventInstance, onEventName)</code> API. This will return 
a similar <code>Future[EventResult</code> to the one returned by <code>Baker.fireEventAndResolveWhenCompleted</code> except the data will be up
to the moment the <code>onEventName</code> was fired.</p>
</li>
</ol>
<div class="superfences-tabs">
<input name="__tabs_3" type="radio" id="__tab_3_0" checked="checked" />
<label for="__tab_3_0">Scala</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="k">import</span> <span class="nn">akka.actor.ActorSystem</span>
<span class="k">import</span> <span class="nn">akka.stream.</span><span class="o">{</span><span class="nc">ActorMaterializer</span><span class="o">,</span> <span class="nc">Materializer</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span>
<span class="k">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span>
<span class="k">import</span> <span class="nn">com.ing.baker.runtime.scaladsl.</span><span class="o">{</span><span class="nc">Baker</span><span class="o">,</span> <span class="nc">EventInstance</span><span class="o">}</span>

<span class="k">import</span> <span class="nn">scala.concurrent.</span><span class="o">{</span><span class="nc">Await</span><span class="o">,</span> <span class="nc">Future</span><span class="o">}</span>
<span class="k">import</span> <span class="nn">scala.concurrent.duration._</span>
<span class="k">import</span> <span class="nn">scala.concurrent.ExecutionContext.Implicits.global</span>


<span class="k">implicit</span> <span class="k">val</span> <span class="n">actorSystem</span><span class="k">:</span> <span class="kt">ActorSystem</span> <span class="o">=</span>
  <span class="nc">ActorSystem</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">)</span>
<span class="k">implicit</span> <span class="k">val</span> <span class="n">materializer</span><span class="k">:</span> <span class="kt">Materializer</span> <span class="o">=</span>
  <span class="nc">ActorMaterializer</span><span class="o">()</span>
<span class="k">val</span> <span class="n">baker</span><span class="k">:</span> <span class="kt">Baker</span> <span class="o">=</span> <span class="nc">Baker</span><span class="o">.</span><span class="n">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">)</span>

<span class="k">val</span> <span class="n">compiledRecipe</span><span class="k">:</span> <span class="kt">CompiledRecipe</span> <span class="o">=</span> <span class="nc">RecipeCompiler</span><span class="o">.</span><span class="n">compileRecipe</span><span class="o">(</span><span class="nc">WebshopRecipe</span><span class="o">.</span><span class="n">recipe</span><span class="o">)</span>

<span class="k">val</span> <span class="n">program</span><span class="k">:</span> <span class="kt">Future</span><span class="o">[</span><span class="kt">Unit</span><span class="o">]</span> <span class="k">=</span> <span class="k">for</span> <span class="o">{</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addImplementation</span><span class="o">(</span><span class="nc">WebshopInstancesReflection</span><span class="o">.</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
  <span class="n">recipeId</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">bake</span><span class="o">(</span><span class="n">recipeId</span><span class="o">,</span> <span class="s">&quot;first-instance-id&quot;</span><span class="o">)</span>
  <span class="n">firstOrderPlaced</span><span class="k">:</span> <span class="kt">EventInstance</span> <span class="o">=</span>
    <span class="nc">EventInstance</span><span class="o">.</span><span class="n">unsafeFrom</span><span class="o">(</span><span class="nc">WebshopRecipeReflection</span><span class="o">.</span><span class="nc">OrderPlaced</span><span class="o">(</span><span class="s">&quot;order-uuid&quot;</span><span class="o">,</span> <span class="nc">List</span><span class="o">(</span><span class="s">&quot;item1&quot;</span><span class="o">,</span> <span class="s">&quot;item2&quot;</span><span class="o">)))</span>
  <span class="n">result</span> <span class="k">&lt;-</span> <span class="n">baker</span><span class="o">.</span><span class="n">fireEventAndResolveWhenCompleted</span><span class="o">(</span><span class="s">&quot;first-instance-id&quot;</span><span class="o">,</span> <span class="n">firstOrderPlaced</span><span class="o">)</span>
  <span class="k">_</span> <span class="k">=</span> <span class="n">assert</span><span class="o">(</span><span class="n">result</span><span class="o">.</span><span class="n">events</span> <span class="o">==</span> <span class="nc">Seq</span><span class="o">(</span>
    <span class="nc">WebshopRecipe</span><span class="o">.</span><span class="nc">Events</span><span class="o">.</span><span class="nc">OrderPlaced</span><span class="o">.</span><span class="n">name</span><span class="o">,</span>
    <span class="nc">WebshopRecipe</span><span class="o">.</span><span class="nc">Events</span><span class="o">.</span><span class="nc">ItemsReserved</span><span class="o">.</span><span class="n">name</span>
  <span class="o">)</span>
<span class="o">}</span> <span class="k">yield</span> <span class="o">()</span>
</pre></div></div>
<input name="__tabs_3" type="radio" id="__tab_3_1" />
<label for="__tab_3_1">Java</label>
<div class="superfences-content"><div class="codehilite"><pre><span></span><span class="kn">import</span> <span class="nn">akka.actor.ActorSystem</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.ActorMaterializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">akka.stream.Materializer</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.compiler.RecipeCompiler</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.il.CompiledRecipe</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.Baker</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.EventInstance</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.EventResult</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">com.ing.baker.runtime.javadsl.InteractionInstance</span><span class="o">;</span>

<span class="kn">import</span> <span class="nn">java.util.ArrayList</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.List</span><span class="o">;</span>
<span class="kn">import</span> <span class="nn">java.util.concurrent.CompletableFuture</span><span class="o">;</span>

<span class="kd">public</span> <span class="kd">class</span> <span class="nc">JMain</span> <span class="o">{</span>

    <span class="kd">static</span> <span class="kd">public</span> <span class="kt">void</span> <span class="nf">main</span><span class="o">(</span><span class="n">String</span><span class="o">[]</span> <span class="n">args</span><span class="o">)</span> <span class="o">{</span>

        <span class="n">ActorSystem</span> <span class="n">actorSystem</span> <span class="o">=</span> <span class="n">ActorSystem</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="s">&quot;WebshopSystem&quot;</span><span class="o">);</span>
        <span class="n">Materializer</span> <span class="n">materializer</span> <span class="o">=</span> <span class="n">ActorMaterializer</span><span class="o">.</span><span class="na">create</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">);</span>
        <span class="n">Baker</span> <span class="n">baker</span> <span class="o">=</span> <span class="n">Baker</span><span class="o">.</span><span class="na">akkaLocalDefault</span><span class="o">(</span><span class="n">actorSystem</span><span class="o">,</span> <span class="n">materializer</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">items</span> <span class="o">=</span> <span class="k">new</span> <span class="n">ArrayList</span><span class="o">&lt;&gt;(</span><span class="mi">2</span><span class="o">);</span>
        <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;item1&quot;</span><span class="o">);</span>
        <span class="n">items</span><span class="o">.</span><span class="na">add</span><span class="o">(</span><span class="s">&quot;item2&quot;</span><span class="o">);</span>
        <span class="n">EventInstance</span> <span class="n">firstOrderPlaced</span> <span class="o">=</span>
            <span class="n">EventInstance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="k">new</span> <span class="n">JWebshopRecipe</span><span class="o">.</span><span class="na">OrderPlaced</span><span class="o">(</span><span class="s">&quot;order-uuid&quot;</span><span class="o">,</span> <span class="n">items</span><span class="o">));</span>

        <span class="n">InteractionInstance</span> <span class="n">reserveItemsInstance</span> <span class="o">=</span> <span class="n">InteractionInstance</span><span class="o">.</span><span class="na">from</span><span class="o">(</span><span class="k">new</span> <span class="n">ReserveItems</span><span class="o">());</span>
        <span class="n">CompiledRecipe</span> <span class="n">compiledRecipe</span> <span class="o">=</span> <span class="n">RecipeCompiler</span><span class="o">.</span><span class="na">compileRecipe</span><span class="o">(</span><span class="n">JWebshopRecipe</span><span class="o">.</span><span class="na">recipe</span><span class="o">);</span>

        <span class="n">String</span> <span class="n">recipeInstanceId</span> <span class="o">=</span> <span class="s">&quot;first-instance-id&quot;</span><span class="o">;</span>
        <span class="n">CompletableFuture</span><span class="o">&lt;</span><span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;&gt;</span> <span class="n">result</span> <span class="o">=</span> <span class="n">baker</span><span class="o">.</span><span class="na">addImplementation</span><span class="o">(</span><span class="n">reserveItemsInstance</span><span class="o">)</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">ignore</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">addRecipe</span><span class="o">(</span><span class="n">compiledRecipe</span><span class="o">))</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">recipeId</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">bake</span><span class="o">(</span><span class="n">recipeId</span><span class="o">,</span> <span class="n">recipeInstanceId</span><span class="o">))</span>
            <span class="o">.</span><span class="na">thenCompose</span><span class="o">(</span><span class="n">ignore</span> <span class="o">-&gt;</span> <span class="n">baker</span><span class="o">.</span><span class="na">fireEventAndResolveWhenCompleted</span><span class="o">(</span><span class="n">recipeInstanceId</span><span class="o">,</span> <span class="n">firstOrderPlaced</span><span class="o">))</span>
            <span class="o">.</span><span class="na">thenApply</span><span class="o">(</span><span class="n">EventResult</span><span class="o">::</span><span class="n">events</span><span class="o">);</span>

        <span class="n">List</span><span class="o">&lt;</span><span class="n">String</span><span class="o">&gt;</span> <span class="n">blockedResult</span> <span class="o">=</span> <span class="n">result</span><span class="o">.</span><span class="na">join</span><span class="o">();</span>
        <span class="k">assert</span><span class="o">(</span><span class="n">blockedResult</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&quot;OrderPlaced&quot;</span><span class="o">)</span> <span class="o">&amp;&amp;</span> <span class="n">blockedResult</span><span class="o">.</span><span class="na">contains</span><span class="o">(</span><span class="s">&quot;ReservedItems&quot;</span><span class="o">));</span>
    <span class="o">}</span>
<span class="o">}</span>
</pre></div></div>
</div>
<h2 id="inquiry">Inquiry</h2>
<h3 id="recipe-instance-state">Recipe Instance State</h3>
<p>As a final step on what you might want to do with Baker (without considering handling failed <code>RecipeInstances</code>),
is that you can query the state of a <code>RecipeInstance</code> at any given moment. For this you can use the 
<code>Baker.getInteractionInstanceState(recipeInstanceId)</code> API. This will return an <code>InteractionInstanceState</code> object which 
contains all the event names with timestamps that have executed, and the current available provided ingredients waiting 
for the next <code>InteractionInstances</code> to consume.</p>
<h3 id="recipe-instance-state-visualizations">Recipe Instance State Visualizations</h3>
<p>Another method of fetching state is the visual representation of it. You can do that with the <code>Baker.getVisualState(recipeInstanceId)</code>
API. This will return a GraphViz string like the <a href="../../development-life-cycle/use-visualizations/">visualization api</a> that you can convert into an image.</p>
<p>Here is a visualization of the state of another webshop example, one can clearly see that the process is flowing correctly
without failures and that it is still waiting for the payment sensory event to be fired.</p>
<p><img alt="" src="../../../images/webshop-state-1.svg" /></p>
                
                  
                
              
              
                


              
            </article>
          </div>
        </div>
      </main>
      
        
<footer class="md-footer">
  
    <div class="md-footer-nav">
      <nav class="md-footer-nav__inner md-grid">
        
          <a href="../implement-interactions/" title="Implement Interactions" class="md-flex md-footer-nav__link md-footer-nav__link--prev" rel="prev">
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-back md-footer-nav__button"></i>
            </div>
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Previous
                </span>
                Implement Interactions
              </span>
            </div>
          </a>
        
        
          <a href="../test/" title="Test" class="md-flex md-footer-nav__link md-footer-nav__link--next" rel="next">
            <div class="md-flex__cell md-flex__cell--stretch md-footer-nav__title">
              <span class="md-flex__ellipsis">
                <span class="md-footer-nav__direction">
                  Next
                </span>
                Test
              </span>
            </div>
            <div class="md-flex__cell md-flex__cell--shrink">
              <i class="md-icon md-icon--arrow-forward md-footer-nav__button"></i>
            </div>
          </a>
        
      </nav>
    </div>
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-footer-copyright">
        
        powered by
        <a href="https://www.mkdocs.org">MkDocs</a>
        and
        <a href="https://squidfunk.github.io/mkdocs-material/">
          Material for MkDocs</a>
      </div>
      
    </div>
  </div>
</footer>
      
    </div>
    
      <script src="../../../assets/javascripts/application.245445c6.js"></script>
      
      <script>app.initialize({version:"1.0.4",url:{base:"../../.."}})</script>
      
    
  </body>
</html>