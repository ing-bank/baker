
<!doctype html>
<html lang="en" class="no-js">
  <head>
    
      <meta charset="utf-8">
      <meta name="viewport" content="width=device-width,initial-scale=1">
      
      
      
      
        <link rel="prev" href="../fire-sensory-events/">
      
      
        <link rel="next" href="../monitoring/">
      
      <link rel="icon" href="../../../assets/images/favicon.png">
      <meta name="generator" content="mkdocs-1.4.3, mkdocs-material-9.1.15">
    
    
      
        <title>Testing - Baker</title>
      
    
    
      <link rel="stylesheet" href="../../../assets/stylesheets/main.26e3688c.min.css">
      
      

    
    
    
      
        
        
        <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
        <link rel="stylesheet" href="https://fonts.googleapis.com/css?family=Roboto:300,300i,400,400i,700,700i%7CRoboto+Mono:400,400i,700,700i&display=fallback">
        <style>:root{--md-text-font:"Roboto";--md-code-font:"Roboto Mono"}</style>
      
    
    
      <link rel="stylesheet" href="../../../css/ing.css">
    
    <script>__md_scope=new URL("../../..",location),__md_hash=e=>[...e].reduce((e,_)=>(e<<5)-e+_.charCodeAt(0),0),__md_get=(e,_=localStorage,t=__md_scope)=>JSON.parse(_.getItem(t.pathname+"."+e)),__md_set=(e,_,t=localStorage,a=__md_scope)=>{try{t.setItem(a.pathname+"."+e,JSON.stringify(_))}catch(e){}}</script>
    
      

    
    
    
  </head>
  
  
    <body dir="ltr">
  
    
    
      <script>var palette=__md_get("__palette");if(palette&&"object"==typeof palette.color)for(var key of Object.keys(palette.color))document.body.setAttribute("data-md-color-"+key,palette.color[key])</script>
    
    <input class="md-toggle" data-md-toggle="drawer" type="checkbox" id="__drawer" autocomplete="off">
    <input class="md-toggle" data-md-toggle="search" type="checkbox" id="__search" autocomplete="off">
    <label class="md-overlay" for="__drawer"></label>
    <div data-md-component="skip">
      
        
        <a href="#testing" class="md-skip">
          Skip to content
        </a>
      
    </div>
    <div data-md-component="announce">
      
    </div>
    
    
      

  

<header class="md-header md-header--shadow" data-md-component="header">
  <nav class="md-header__inner md-grid" aria-label="Header">
    <a href="../../.." title="Baker" class="md-header__button md-logo" aria-label="Baker" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    <label class="md-header__button md-icon" for="__drawer">
      <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M3 6h18v2H3V6m0 5h18v2H3v-2m0 5h18v2H3v-2Z"/></svg>
    </label>
    <div class="md-header__title" data-md-component="header-title">
      <div class="md-header__ellipsis">
        <div class="md-header__topic">
          <span class="md-ellipsis">
            Baker
          </span>
        </div>
        <div class="md-header__topic" data-md-component="header-topic">
          <span class="md-ellipsis">
            
              Testing
            
          </span>
        </div>
      </div>
    </div>
    
    
    
      <label class="md-header__button md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
      </label>
      <div class="md-search" data-md-component="search" role="dialog">
  <label class="md-search__overlay" for="__search"></label>
  <div class="md-search__inner" role="search">
    <form class="md-search__form" name="search">
      <input type="text" class="md-search__input" name="query" aria-label="Search" placeholder="Search" autocapitalize="off" autocorrect="off" autocomplete="off" spellcheck="false" data-md-component="search-query" required>
      <label class="md-search__icon md-icon" for="__search">
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M9.5 3A6.5 6.5 0 0 1 16 9.5c0 1.61-.59 3.09-1.56 4.23l.27.27h.79l5 5-1.5 1.5-5-5v-.79l-.27-.27A6.516 6.516 0 0 1 9.5 16 6.5 6.5 0 0 1 3 9.5 6.5 6.5 0 0 1 9.5 3m0 2C7 5 5 7 5 9.5S7 14 9.5 14 14 12 14 9.5 12 5 9.5 5Z"/></svg>
        <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M20 11v2H8l5.5 5.5-1.42 1.42L4.16 12l7.92-7.92L13.5 5.5 8 11h12Z"/></svg>
      </label>
      <nav class="md-search__options" aria-label="Search">
        
        <button type="reset" class="md-search__icon md-icon" title="Clear" aria-label="Clear" tabindex="-1">
          <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M19 6.41 17.59 5 12 10.59 6.41 5 5 6.41 10.59 12 5 17.59 6.41 19 12 13.41 17.59 19 19 17.59 13.41 12 19 6.41Z"/></svg>
        </button>
      </nav>
      
    </form>
    <div class="md-search__output">
      <div class="md-search__scrollwrap" data-md-scrollfix>
        <div class="md-search-result" data-md-component="search-result">
          <div class="md-search-result__meta">
            Initializing search
          </div>
          <ol class="md-search-result__list" role="presentation"></ol>
        </div>
      </div>
    </div>
  </div>
</div>
    
    
      <div class="md-header__source">
        <a href="https://github.com/ing-bank/baker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ing-bank/baker
  </div>
</a>
      </div>
    
  </nav>
  
</header>
    
    <div class="md-container" data-md-component="container">
      
      
        
          
        
      
      <main class="md-main" data-md-component="main">
        <div class="md-main__inner md-grid">
          
            
              
              <div class="md-sidebar md-sidebar--primary" data-md-component="sidebar" data-md-type="navigation" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    


<nav class="md-nav md-nav--primary" aria-label="Navigation" data-md-level="0">
  <label class="md-nav__title" for="__drawer">
    <a href="../../.." title="Baker" class="md-nav__button md-logo" aria-label="Baker" data-md-component="logo">
      
  
  <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 24 24"><path d="M12 8a3 3 0 0 0 3-3 3 3 0 0 0-3-3 3 3 0 0 0-3 3 3 3 0 0 0 3 3m0 3.54C9.64 9.35 6.5 8 3 8v11c3.5 0 6.64 1.35 9 3.54 2.36-2.19 5.5-3.54 9-3.54V8c-3.5 0-6.64 1.35-9 3.54Z"/></svg>

    </a>
    Baker
  </label>
  
    <div class="md-nav__source">
      <a href="https://github.com/ing-bank/baker" title="Go to repository" class="md-source" data-md-component="source">
  <div class="md-source__icon md-icon">
    
    <svg xmlns="http://www.w3.org/2000/svg" viewBox="0 0 448 512"><!--! Font Awesome Free 6.4.0 by @fontawesome - https://fontawesome.com License - https://fontawesome.com/license/free (Icons: CC BY 4.0, Fonts: SIL OFL 1.1, Code: MIT License) Copyright 2023 Fonticons, Inc.--><path d="M439.55 236.05 244 40.45a28.87 28.87 0 0 0-40.81 0l-40.66 40.63 51.52 51.52c27.06-9.14 52.68 16.77 43.39 43.68l49.66 49.66c34.23-11.8 61.18 31 35.47 56.69-26.49 26.49-70.21-2.87-56-37.34L240.22 199v121.85c25.3 12.54 22.26 41.85 9.08 55a34.34 34.34 0 0 1-48.55 0c-17.57-17.6-11.07-46.91 11.25-56v-123c-20.8-8.51-24.6-30.74-18.64-45L142.57 101 8.45 235.14a28.86 28.86 0 0 0 0 40.81l195.61 195.6a28.86 28.86 0 0 0 40.8 0l194.69-194.69a28.86 28.86 0 0 0 0-40.81z"/></svg>
  </div>
  <div class="md-source__repository">
    ing-bank/baker
  </div>
</a>
    </div>
  
  <ul class="md-nav__list" data-md-scrollfix>
    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../.." class="md-nav__link">
        Home
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../quickstart-guide/" class="md-nav__link">
        Quickstart guide
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../concepts/" class="md-nav__link">
        Concepts
      </a>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../tutorial/" class="md-nav__link">
        Tutorial
      </a>
    </li>
  

    
      
      
      

  
  
    
  
  
    
    <li class="md-nav__item md-nav__item--active md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_5" checked>
      
      
      
        <label class="md-nav__link" for="__nav_5" id="__nav_5_label" tabindex="0">
          Cookbook
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_5_label" aria-expanded="true">
        <label class="md-nav__title" for="__nav_5">
          <span class="md-nav__icon md-icon"></span>
          Cookbook
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../recipe-dsl/" class="md-nav__link">
        Recipe DSL
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../error-handling/" class="md-nav__link">
        Error handling
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../visualizations/" class="md-nav__link">
        Visualizations
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../fire-sensory-events/" class="md-nav__link">
        Fire events and inquiry
      </a>
    </li>
  

            
          
            
              
  
  
    
  
  
    <li class="md-nav__item md-nav__item--active">
      
      <input class="md-nav__toggle md-toggle" type="checkbox" id="__toc">
      
      
        
      
      
        <label class="md-nav__link md-nav__link--active" for="__toc">
          Testing
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <a href="./" class="md-nav__link md-nav__link--active">
        Testing
      </a>
      
        

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recipe-validation-tests" class="md-nav__link">
    Recipe validation tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#business-logic-tests" class="md-nav__link">
    Business logic tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-tests" class="md-nav__link">
    Implementation tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#baker-test-library" class="md-nav__link">
    Baker test library
  </a>
  
    <nav class="md-nav" aria-label="Baker test library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-dependency" class="md-nav__link">
    Adding the dependency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsflow" class="md-nav__link">
    EventsFlow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipeassert" class="md-nav__link">
    RecipeAssert
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
      
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../monitoring/" class="md-nav__link">
        Monitoring
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_6" >
      
      
      
        <label class="md-nav__link" for="__nav_6" id="__nav_6_label" tabindex="0">
          Reference
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_6_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_6">
          <span class="md-nav__icon md-icon"></span>
          Reference
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/main-abstractions/" class="md-nav__link">
        Main Abstractions
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/execution-semantics/" class="md-nav__link">
        Execution Semantics
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/baker-types-and-values/" class="md-nav__link">
        Baker Types and Values
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/runtime/" class="md-nav__link">
        The Akka Based Runtime
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../reference/stores/" class="md-nav__link">
        Event Stores and Cluster Configuration
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    
    <li class="md-nav__item md-nav__item--nested">
      
      
      
      
      <input class="md-nav__toggle md-toggle " type="checkbox" id="__nav_7" >
      
      
      
        <label class="md-nav__link" for="__nav_7" id="__nav_7_label" tabindex="0">
          Versions
          <span class="md-nav__icon md-icon"></span>
        </label>
      
      <nav class="md-nav" data-md-level="1" aria-labelledby="__nav_7_label" aria-expanded="false">
        <label class="md-nav__title" for="__nav_7">
          <span class="md-nav__icon md-icon"></span>
          Versions
        </label>
        <ul class="md-nav__list" data-md-scrollfix>
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../versions/baker-3-release-notes/" class="md-nav__link">
        Release Notes v3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../versions/baker-3/" class="md-nav__link">
        Migration Guide v3
      </a>
    </li>
  

            
          
            
              
  
  
  
    <li class="md-nav__item">
      <a href="../../versions/baker-2/" class="md-nav__link">
        Migration Guide v2
      </a>
    </li>
  

            
          
        </ul>
      </nav>
    </li>
  

    
      
      
      

  
  
  
    <li class="md-nav__item">
      <a href="../../feature-comparison/" class="md-nav__link">
        Feature comparison
      </a>
    </li>
  

    
  </ul>
</nav>
                  </div>
                </div>
              </div>
            
            
              
              <div class="md-sidebar md-sidebar--secondary" data-md-component="sidebar" data-md-type="toc" >
                <div class="md-sidebar__scrollwrap">
                  <div class="md-sidebar__inner">
                    

<nav class="md-nav md-nav--secondary" aria-label="Table of contents">
  
  
  
    
  
  
    <label class="md-nav__title" for="__toc">
      <span class="md-nav__icon md-icon"></span>
      Table of contents
    </label>
    <ul class="md-nav__list" data-md-component="toc" data-md-scrollfix>
      
        <li class="md-nav__item">
  <a href="#recipe-validation-tests" class="md-nav__link">
    Recipe validation tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#business-logic-tests" class="md-nav__link">
    Business logic tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#implementation-tests" class="md-nav__link">
    Implementation tests
  </a>
  
</li>
      
        <li class="md-nav__item">
  <a href="#baker-test-library" class="md-nav__link">
    Baker test library
  </a>
  
    <nav class="md-nav" aria-label="Baker test library">
      <ul class="md-nav__list">
        
          <li class="md-nav__item">
  <a href="#adding-the-dependency" class="md-nav__link">
    Adding the dependency
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#eventsflow" class="md-nav__link">
    EventsFlow
  </a>
  
</li>
        
          <li class="md-nav__item">
  <a href="#recipeassert" class="md-nav__link">
    RecipeAssert
  </a>
  
</li>
        
      </ul>
    </nav>
  
</li>
      
    </ul>
  
</nav>
                  </div>
                </div>
              </div>
            
          
          
            <div class="md-content" data-md-component="content">
              <article class="md-content__inner md-typeset">
                
                  

  
  


<h1 id="testing">Testing</h1>
<p>In general, Baker applications are easy to test because the Baker model enforces separation and decoupling between parts
of
your system. It provides a clear distinction between business logic (the recipe) and implementation details
(interaction implementations). Furthermore, interactions are independent of each other, since every interaction only
depends on its inputs.</p>
<p>This section describes testing strategies for the different layers of a Baker application. And demonstrates how to
simplify testing by using the <code>baker-test</code> library.</p>
<h2 id="recipe-validation-tests">Recipe validation tests</h2>
<p>A recipe is validated when it's compiled by the <code>RecipeCompiler</code>. Any validation errors that might occur during this
compilation are available through the resulting <code>CompiledRecipe</code> instance. A simple unit test that checks for
validation errors in your recipe is essential.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="1:3"><input checked="checked" id="__tabbed_1_1" name="__tabbed_1" type="radio" /><input id="__tabbed_1_2" name="__tabbed_1" type="radio" /><input id="__tabbed_1_3" name="__tabbed_1" type="radio" /><div class="tabbed-labels"><label for="__tabbed_1_1">Java</label><label for="__tabbed_1_2">Kotlin</label><label for="__tabbed_1_3">Scala</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kn">package</span><span class="w"> </span><span class="nn">examples.java.recipes</span><span class="p">;</span>

<span class="kn">import</span><span class="w"> </span><span class="nn">com.ing.baker.compiler.RecipeCompiler</span><span class="p">;</span>
<span class="kn">import</span><span class="w"> </span><span class="nn">org.junit.Test</span><span class="p">;</span>

<span class="kn">import static</span><span class="w"> </span><span class="nn">org.junit.Assert.assertTrue</span><span class="p">;</span>

<span class="kd">public</span><span class="w"> </span><span class="kd">class</span> <span class="nc">WebShopRecipeTest</span><span class="w"> </span><span class="p">{</span>

<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">public</span><span class="w"> </span><span class="kt">void</span><span class="w"> </span><span class="nf">recipeShouldCompileWithoutValidationErrors</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">var</span><span class="w"> </span><span class="n">validationErrors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RecipeCompiler</span><span class="p">.</span><span class="na">compileRecipe</span><span class="p">(</span><span class="n">WebShopRecipe</span><span class="p">.</span><span class="na">recipe</span><span class="p">).</span><span class="na">getValidationErrors</span><span class="p">();</span>
<span class="w">        </span><span class="n">assertTrue</span><span class="p">(</span>
<span class="w">            </span><span class="n">String</span><span class="p">.</span><span class="na">format</span><span class="p">(</span><span class="s">&quot;Recipe compilation resulted in validation errors: \n%s&quot;</span><span class="p">,</span><span class="w"> </span><span class="n">validationErrors</span><span class="p">),</span>
<span class="w">            </span><span class="n">validationErrors</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">()</span>
<span class="w">        </span><span class="p">);</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">examples.kotlin.recipes</span>

<span class="k">import</span><span class="w"> </span><span class="nn">com.ing.baker.compiler.RecipeCompiler</span>
<span class="k">import</span><span class="w"> </span><span class="nn">com.ing.baker.recipe.kotlindsl.ExperimentalDsl</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org.junit.Test</span>

<span class="nd">@ExperimentalDsl</span>
<span class="kd">class</span><span class="w"> </span><span class="nc">WebShopRecipeTest</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="nd">@Test</span>
<span class="w">    </span><span class="kd">fun</span><span class="w"> </span><span class="nf">`recipe should compile without validation errors`</span><span class="p">()</span><span class="w"> </span><span class="p">{</span>
<span class="w">        </span><span class="kd">val</span><span class="w"> </span><span class="nv">validationErrors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RecipeCompiler</span><span class="p">.</span><span class="na">compileRecipe</span><span class="p">(</span><span class="n">WebShopRecipe</span><span class="p">.</span><span class="na">recipe</span><span class="p">).</span><span class="na">validationErrors</span>
<span class="w">        </span><span class="n">assert</span><span class="p">(</span><span class="n">validationErrors</span><span class="p">.</span><span class="na">isEmpty</span><span class="p">())</span><span class="w"> </span><span class="p">{</span>
<span class="w">            </span><span class="s">&quot;Recipe compilation resulted in validation errors: \n</span><span class="si">${</span><span class="n">validationErrors</span><span class="p">.</span><span class="na">joinToString</span><span class="p">(</span><span class="n">separator</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="s">&quot;</span><span class="err">\</span><span class="n">n</span><span class="s">&quot;</span><span class="p">)</span><span class="si">}</span><span class="s">&quot;</span>
<span class="w">        </span><span class="p">}</span>
<span class="w">    </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="k">package</span><span class="w"> </span><span class="nn">examples</span><span class="p">.</span><span class="nn">scala</span><span class="p">.</span><span class="n">recipes</span>

<span class="k">import</span><span class="w"> </span><span class="nn">com</span><span class="p">.</span><span class="nn">ing</span><span class="p">.</span><span class="nn">baker</span><span class="p">.</span><span class="nn">compiler</span><span class="p">.</span><span class="nc">RecipeCompiler</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org</span><span class="p">.</span><span class="nn">scalatest</span><span class="p">.</span><span class="nn">flatspec</span><span class="p">.</span><span class="nc">AnyFlatSpec</span>
<span class="k">import</span><span class="w"> </span><span class="nn">org</span><span class="p">.</span><span class="nn">scalatest</span><span class="p">.</span><span class="nn">matchers</span><span class="p">.</span><span class="nn">should</span><span class="p">.</span><span class="nc">Matchers</span>

<span class="k">class</span><span class="w"> </span><span class="nc">WebShopRecipeTest</span><span class="w"> </span><span class="k">extends</span><span class="w"> </span><span class="nc">AnyFlatSpec</span><span class="w"> </span><span class="k">with</span><span class="w"> </span><span class="nc">Matchers</span><span class="w"> </span><span class="p">{</span>
<span class="w">  </span><span class="s">&quot;Recipe&quot;</span><span class="w"> </span><span class="n">should</span><span class="w"> </span><span class="s">&quot;compile without validation errors&quot;</span><span class="w"> </span><span class="n">in</span><span class="w"> </span><span class="p">{</span>
<span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">validationErrors</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RecipeCompiler</span><span class="p">.</span><span class="n">compileRecipe</span><span class="p">(</span><span class="nc">WebShopRecipe</span><span class="p">.</span><span class="n">recipe</span><span class="p">).</span><span class="n">validationErrors</span>
<span class="w">    </span><span class="n">assert</span><span class="p">(</span><span class="n">validationErrors</span><span class="p">.</span><span class="n">isEmpty</span><span class="p">)</span>
<span class="w">  </span><span class="p">}</span>
<span class="p">}</span>
</code></pre></div>
</div>
</div>
</div>
<h2 id="business-logic-tests">Business logic tests</h2>
<p>The next layer is to test that the recipe actually does what you expect it to do at the business logic level. You can
achieve this providing dummy or mock interactions that behave in an expected manner. The objective here is to test that
the Recipe ends on the expected state given a certain order of firing sensory events.</p>
<p>The full test flow looks like this:</p>
<ol>
<li>Setup dummy or mock interactions that behave according to the test scenario.</li>
<li>Create a new in memory Baker with the interactions from step 1.</li>
<li>Add and bake the recipe</li>
<li>Fire sensory events</li>
<li>Assert expectations by <a href="../fire-sensory-events/#inquiry">querying the state of the recipe</a>.</li>
</ol>
<h2 id="implementation-tests">Implementation tests</h2>
<p>The final layer is to individually test your implementations, which will resemble your normal e2e tests,
interconnectivity tests, or unit tests. What these tests look like will strongly depend on your teams testing and
coding conventions.</p>
<h2 id="baker-test-library">Baker test library</h2>
<p>The <code>baker-test</code> library simplifies the testing of baker-based logic. Using this library makes the test code 
concise and readable in both Java and Scala. It also simplifies the testing of the cases when asynchronous recipe 
execution is involved.</p>
<div class="admonition warning">
<p class="admonition-title">Warning</p>
<p>At the moment <code>baker-test</code> is not compatible with the suspending Kotlin Baker APIs.</p>
</div>
<h3 id="adding-the-dependency">Adding the dependency</h3>
<div class="tabbed-set tabbed-alternate" data-tabs="2:2"><input checked="checked" id="__tabbed_2_1" name="__tabbed_2" type="radio" /><input id="__tabbed_2_2" name="__tabbed_2" type="radio" /><div class="tabbed-labels"><label for="__tabbed_2_1">Maven</label><label for="__tabbed_2_2">Sbt</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nt">&lt;dependency&gt;</span>
<span class="w">  </span><span class="nt">&lt;groupId&gt;</span>com.ing.baker<span class="nt">&lt;/groupId&gt;</span>
<span class="w">  </span><span class="nt">&lt;artifactId&gt;</span>baker-test_2.13<span class="nt">&lt;/artifactId&gt;</span>
<span class="w">  </span><span class="nt">&lt;version&gt;</span>${baker.version}<span class="nt">&lt;/version&gt;</span>
<span class="w">  </span><span class="nt">&lt;scope&gt;</span>test<span class="nt">&lt;/scope&gt;</span>
<span class="nt">&lt;/dependency&gt;</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">libraryDependencies</span><span class="w"> </span><span class="o">+=</span><span class="w"> </span><span class="s">&quot;com.ing.baker&quot;</span><span class="w"> </span><span class="o">%%</span><span class="w"> </span><span class="s">&quot;baker-test_2.13&quot;</span><span class="w"> </span><span class="o">%</span><span class="w"> </span><span class="n">bakerVersion</span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="eventsflow">EventsFlow</h3>
<p><code>EventsFlow</code> is made to simplify the work with the baker events while testing. <code>EventsFlow</code> is immutable.</p>
<p>You create a new events flow from events classes:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="3:2"><input checked="checked" id="__tabbed_3_1" name="__tabbed_3" type="radio" /><input id="__tabbed_3_2" name="__tabbed_3" type="radio" /><div class="tabbed-labels"><label for="__tabbed_3_1">Scala</label><label for="__tabbed_3_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">flow</span><span class="p">:</span><span class="w"> </span><span class="nc">EventsFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">      </span><span class="k">classOf</span><span class="p">[</span><span class="nc">SomeSensoryEvent</span><span class="p">]</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="k">classOf</span><span class="p">[</span><span class="nc">InteractionSucceeded</span><span class="p">]</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">EventsFlow</span><span class="w"> </span><span class="n">flow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">    </span><span class="n">SomeSensoryEvent</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">    </span><span class="n">InteractionSucceeded</span><span class="p">.</span><span class="na">class</span>
<span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>There is also an option to create a new event flow from the existing one:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="4:2"><input checked="checked" id="__tabbed_4_1" name="__tabbed_4" type="radio" /><input id="__tabbed_4_2" name="__tabbed_4" type="radio" /><div class="tabbed-labels"><label for="__tabbed_4_1">Scala</label><label for="__tabbed_4_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="kd">val</span><span class="w"> </span><span class="n">anotherFlow</span><span class="p">:</span><span class="w"> </span><span class="nc">EventsFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">    </span><span class="n">flow</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="k">classOf</span><span class="p">[</span><span class="nc">SomeSensoryEvent</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="k">classOf</span><span class="p">[</span><span class="nc">AnotherSensoryEvent</span><span class="p">]</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">EventsFlow</span><span class="w"> </span><span class="n">anotherFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">flow</span>
<span class="w">    </span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">SomeSensoryEvent</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">AnotherSensoryEvent</span><span class="p">.</span><span class="na">class</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>It is also possible to combine classes, strings and other events flows:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="5:2"><input checked="checked" id="__tabbed_5_1" name="__tabbed_5" type="radio" /><input id="__tabbed_5_2" name="__tabbed_5" type="radio" /><div class="tabbed-labels"><label for="__tabbed_5_1">Scala</label><label for="__tabbed_5_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="kd">val</span><span class="w"> </span><span class="n">unhappyFlow</span><span class="p">:</span><span class="w"> </span><span class="nc">EventsFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span>
<span class="w">        </span><span class="n">happyFlow</span><span class="w"> </span><span class="o">--</span><span class="w"> </span><span class="k">classOf</span><span class="p">[</span><span class="nc">InteractionSucceeded</span><span class="p">]</span><span class="w"> </span><span class="o">++</span><span class="w"> </span><span class="s">&quot;InteractionExhausted&quot;</span><span class="w"> </span><span class="o">+++</span><span class="w"> </span><span class="n">someErrorFlow</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">EventsFlow</span><span class="w"> </span><span class="n">unhappyFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">happyFlow</span>
<span class="w">        </span><span class="p">.</span><span class="na">remove</span><span class="p">(</span><span class="n">InteractionSucceeded</span><span class="p">.</span><span class="na">class</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="s">&quot;InteractionExhausted&quot;</span><span class="p">)</span>
<span class="w">        </span><span class="p">.</span><span class="na">add</span><span class="p">(</span><span class="n">someErrorFlow</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>Events flows are compared ignoring the order of the events:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="6:2"><input checked="checked" id="__tabbed_6_1" name="__tabbed_6" type="radio" /><input id="__tabbed_6_2" name="__tabbed_6" type="radio" /><div class="tabbed-labels"><label for="__tabbed_6_1">Scala</label><label for="__tabbed_6_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="s">&quot;EventOne&quot;</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">&quot;EventTwo&quot;</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;EventTwo&quot;</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="s">&quot;EventOne&quot;</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span><span class="w"> </span><span class="c1">// true   </span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;EventOne&quot;</span><span class="p">,</span><span class="s">&quot;EventTwo&quot;</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;EventTwo&quot;</span><span class="p">,</span><span class="s">&quot;EventOne&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// true   </span>
</code></pre></div>
</div>
</div>
</div>
<p>While comparing events flows it does not matter if an event is provided as a class or as a string:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="7:2"><input checked="checked" id="__tabbed_7_1" name="__tabbed_7" type="radio" /><input id="__tabbed_7_2" name="__tabbed_7" type="radio" /><div class="tabbed-labels"><label for="__tabbed_7_1">Scala</label><label for="__tabbed_7_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="k">classOf</span><span class="p">[</span><span class="nc">EventOne</span><span class="p">]</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="s">&quot;EventOne&quot;</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span><span class="w"> </span><span class="c1">// true   </span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">   </span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">EventOne</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">equals</span><span class="p">(</span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="s">&quot;EventOne&quot;</span><span class="p">));</span><span class="w"> </span><span class="c1">// true   </span>
</code></pre></div>
</div>
</div>
</div>
<h3 id="recipeassert">RecipeAssert</h3>
<p><code>RecipeAssert</code> is the starting point of all your assertions for the recipe instance.</p>
<p>To create a <code>RecipeAssert</code> instance a baker instance and a recipe instance id are required:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="8:2"><input checked="checked" id="__tabbed_8_1" name="__tabbed_8" type="radio" /><input id="__tabbed_8_2" name="__tabbed_8" type="radio" /><div class="tabbed-labels"><label for="__tabbed_8_1">Scala</label><label for="__tabbed_8_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">recipeAssert</span><span class="p">:</span><span class="w"> </span><span class="nc">RecipeAssert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">RecipeAssert</span><span class="w"> </span><span class="n">recipeAssert</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>There is a simple way to assert if the events flow for this recipe instance is exactly the same as expected:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="9:2"><input checked="checked" id="__tabbed_9_1" name="__tabbed_9" type="radio" /><input id="__tabbed_9_2" name="__tabbed_9" type="radio" /><div class="tabbed-labels"><label for="__tabbed_9_1">Scala</label><label for="__tabbed_9_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">  </span><span class="kd">val</span><span class="w"> </span><span class="n">happyFlow</span><span class="p">:</span><span class="w"> </span><span class="nc">EventsFlow</span><span class="w"> </span><span class="o">=</span>
<span class="w">    </span><span class="k">classOf</span><span class="p">[</span><span class="nc">SomeSensoryEvent</span><span class="p">]</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="k">classOf</span><span class="p">[</span><span class="nc">InteractionSucceeded</span><span class="p">]</span><span class="w"> </span><span class="o">::</span><span class="w"> </span><span class="nc">EmptyFlow</span>
<span class="w">  </span><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">).</span><span class="n">assertEventsFlow</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="w">    </span><span class="n">EventsFlow</span><span class="w"> </span><span class="n">happyFlow</span><span class="w"> </span><span class="o">=</span><span class="w"> </span><span class="n">EventsFlow</span><span class="p">.</span><span class="na">of</span><span class="p">(</span>
<span class="w">        </span><span class="n">SomeSensoryEvent</span><span class="p">.</span><span class="na">class</span><span class="p">,</span>
<span class="w">        </span><span class="n">InteractionSucceeded</span><span class="p">.</span><span class="na">class</span>
<span class="w">    </span><span class="p">);</span>
<span class="w">    </span><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">).</span><span class="na">assertEventsFlow</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>
<p>If the assertion fails a clear error message with the difference is provided:</p>
<div class="highlight"><pre><span></span><code>Events are not equal:
    actual: OrderPlaced, ItemsReserved
  expected: OrderPlaced, ItemsNotReserved
difference: ++ ItemsNotReserved
            -- ItemsReserved
</code></pre></div>
<p>There are multiple methods to assert ingredient values.</p>
<div class="tabbed-set tabbed-alternate" data-tabs="10:2"><input checked="checked" id="__tabbed_10_1" name="__tabbed_10" type="radio" /><input id="__tabbed_10_2" name="__tabbed_10" type="radio" /><div class="tabbed-labels"><label for="__tabbed_10_1">Scala</label><label for="__tabbed_10_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientName&quot;</span><span class="p">).</span><span class="n">isEqual</span><span class="p">(</span><span class="n">expectedValue</span><span class="p">)</span><span class="w"> </span><span class="c1">// is equal to the expected value</span>
<span class="w">  </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;nullishIngredient&quot;</span><span class="p">).</span><span class="n">isNull</span><span class="w"> </span><span class="c1">// exists and has `null` value</span>
<span class="w">  </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;not-existing&quot;</span><span class="p">).</span><span class="n">isAbsent</span><span class="w"> </span><span class="c1">// ingredient is not a part of the recipe</span>
<span class="w">  </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;someListOfStrings&quot;</span><span class="p">).</span><span class="n">is</span><span class="p">(</span><span class="n">value</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="nc">Assertions</span><span class="p">.</span><span class="n">assert</span><span class="p">(</span><span class="n">value</span><span class="p">.</span><span class="n">asList</span><span class="p">(</span><span class="k">classOf</span><span class="p">[</span><span class="nc">String</span><span class="p">]).</span><span class="n">size</span><span class="w"> </span><span class="o">==</span><span class="w"> </span><span class="mi">2</span><span class="p">))</span><span class="w"> </span><span class="c1">// custom</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">  </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientName&quot;</span><span class="p">).</span><span class="na">isEqual</span><span class="p">(</span><span class="n">expectedValue</span><span class="p">)</span><span class="w"> </span><span class="c1">// is equal to the expected value</span>
<span class="w">  </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;nullishIngredient&quot;</span><span class="p">).</span><span class="na">isNull</span><span class="p">()</span><span class="w"> </span><span class="c1">// exists and has `null` value</span>
<span class="w">  </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;not-existing&quot;</span><span class="p">).</span><span class="na">isAbsent</span><span class="p">()</span><span class="w"> </span><span class="c1">// ingredient is not a part of the recipe</span>
<span class="w">  </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;someListOfStrings&quot;</span><span class="p">).</span><span class="na">is</span><span class="p">(</span><span class="n">val</span><span class="w"> </span><span class="o">=&gt;</span><span class="w"> </span><span class="n">Assert</span><span class="p">.</span><span class="na">assertEquals</span><span class="p">(</span><span class="mi">2</span><span class="p">,</span><span class="w"> </span><span class="n">val</span><span class="p">.</span><span class="na">asList</span><span class="p">(</span><span class="n">String</span><span class="p">.</span><span class="na">class</span><span class="p">).</span><span class="na">size</span><span class="p">()));</span><span class="w"> </span><span class="c1">// custom</span>
</code></pre></div>
</div>
</div>
</div>
<p>You can log some information from the baker recipe instance.</p>
<p><em>Note: But in most cases you probably should not have to do it because the current state is logged when any of the assertions fail.</em></p>
<div class="tabbed-set tabbed-alternate" data-tabs="11:2"><input checked="checked" id="__tabbed_11_1" name="__tabbed_11" type="radio" /><input id="__tabbed_11_2" name="__tabbed_11" type="radio" /><div class="tabbed-labels"><label for="__tabbed_11_1">Scala</label><label for="__tabbed_11_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">logIngredients</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs ingredients</span>
<span class="w">    </span><span class="p">.</span><span class="n">logEventNames</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs event names</span>
<span class="w">    </span><span class="p">.</span><span class="n">logVisualState</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs visual state in dot language</span>
<span class="w">    </span><span class="p">.</span><span class="n">logCurrentState</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs all the information available</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">logIngredients</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs ingredients</span>
<span class="w">    </span><span class="p">.</span><span class="na">logEventNames</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs event names</span>
<span class="w">    </span><span class="p">.</span><span class="na">logVisualState</span><span class="p">()</span><span class="w"> </span><span class="c1">// logs visual state in dot language</span>
<span class="w">    </span><span class="p">.</span><span class="na">logCurrentState</span><span class="p">();</span><span class="w"> </span><span class="c1">// logs all the information available</span>
</code></pre></div>
</div>
</div>
</div>
<p>Quite a common task is to wait for a baker process to finish or specific event to fire.
Therefore, the blocking method was implemented:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="12:2"><input checked="checked" id="__tabbed_12_1" name="__tabbed_12" type="radio" /><input id="__tabbed_12_2" name="__tabbed_12" type="radio" /><div class="tabbed-labels"><label for="__tabbed_12_1">Scala</label><label for="__tabbed_12_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">).</span><span class="n">waitFor</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
<span class="c1">// on this line all the events within happyFlow have happened</span>
<span class="c1">// otherwise timeout occurs and an assertion error is thrown</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">).</span><span class="na">waitFor</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">);</span>
<span class="c1">// on this line all the events within happyFlow have happened</span>
<span class="c1">// otherwise timeout occurs and an assertion error is thrown</span>
</code></pre></div>
</div>
</div>
</div>
<p>As you have probably already noticed <code>RecipeAssert</code> is chainable
so the typical usage would probably be something like the following:</p>
<div class="tabbed-set tabbed-alternate" data-tabs="13:2"><input checked="checked" id="__tabbed_13_1" name="__tabbed_13" type="radio" /><input id="__tabbed_13_2" name="__tabbed_13" type="radio" /><div class="tabbed-labels"><label for="__tabbed_13_1">Scala</label><label for="__tabbed_13_2">Java</label></div>
<div class="tabbed-content">
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="nc">RecipeAssert</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">waitFor</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">assertEventsFlow</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientA&quot;</span><span class="p">).</span><span class="n">isEqual</span><span class="p">(</span><span class="n">ingredientValueA</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="n">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientB&quot;</span><span class="p">).</span><span class="n">isEqual</span><span class="p">(</span><span class="n">ingredientValueB</span><span class="p">)</span>
</code></pre></div>
</div>
<div class="tabbed-block">
<div class="highlight"><pre><span></span><code><span class="n">RecipeAssert</span><span class="p">.</span><span class="na">of</span><span class="p">(</span><span class="n">baker</span><span class="p">,</span><span class="w"> </span><span class="n">recipeInstanceId</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">waitFor</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">assertEventsFlow</span><span class="p">(</span><span class="n">happyFlow</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientA&quot;</span><span class="p">).</span><span class="na">isEqual</span><span class="p">(</span><span class="n">ingredientValueA</span><span class="p">)</span>
<span class="w">    </span><span class="p">.</span><span class="na">assertIngredient</span><span class="p">(</span><span class="s">&quot;ingredientB&quot;</span><span class="p">).</span><span class="na">isEqual</span><span class="p">(</span><span class="n">ingredientValueB</span><span class="p">);</span>
</code></pre></div>
</div>
</div>
</div>





                
              </article>
            </div>
          
          
        </div>
        
      </main>
      
        <footer class="md-footer">
  
  <div class="md-footer-meta md-typeset">
    <div class="md-footer-meta__inner md-grid">
      <div class="md-copyright">
  
  
    Made with
    <a href="https://squidfunk.github.io/mkdocs-material/" target="_blank" rel="noopener">
      Material for MkDocs
    </a>
  
</div>
      
    </div>
  </div>
</footer>
      
    </div>
    <div class="md-dialog" data-md-component="dialog">
      <div class="md-dialog__inner md-typeset"></div>
    </div>
    
    <script id="__config" type="application/json">{"base": "../../..", "features": ["content.code.copy"], "search": "../../../assets/javascripts/workers/search.208ed371.min.js", "translations": {"clipboard.copied": "Copied to clipboard", "clipboard.copy": "Copy to clipboard", "search.result.more.one": "1 more on this page", "search.result.more.other": "# more on this page", "search.result.none": "No matching documents", "search.result.one": "1 matching document", "search.result.other": "# matching documents", "search.result.placeholder": "Type to start searching", "search.result.term.missing": "Missing", "select.version": "Select version"}}</script>
    
    
      <script src="../../../assets/javascripts/bundle.b4d07000.min.js"></script>
      
    
  </body>
</html>